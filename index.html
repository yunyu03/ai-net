<!DOCTYPE html>
<html lang="zh">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>AIæº«æš–å¥åº·ç‡Ÿé¤ŠApp</title>
Â  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
Â  <style>
Â  Â  :root {
Â  Â  Â  --green: #bfe3c1;
Â  Â  Â  --beige: #fef9f4;
Â  Â  Â  --orange: #f8b26a;
Â  Â  Â  --shadow: rgba(0, 0, 0, 0.1);
Â  Â  Â  --radius: 20px;
Â  Â  }

Â  Â  body {
Â  Â  Â  font-family: 'Segoe UI', sans-serif;
Â  Â  Â  background-color: var(--beige);
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  }

Â  Â  .page {
Â  Â  Â  display: none;
Â  Â  Â  max-width: 600px;
Â  Â  Â  margin: 30px auto;
Â  Â  Â  background: white;
Â  Â  Â  border-radius: var(--radius);
Â  Â  Â  box-shadow: 0 4px 10px var(--shadow);
Â  Â  Â  padding: 20px;
Â  Â  }

Â  Â  .page.active {
Â  Â  Â  display: block;
Â  Â  }

Â  Â  h2 {
Â  Â  Â  text-align: center;
Â  Â  Â  color: #444;
Â  Â  }

Â  Â  label {
Â  Â  Â  font-weight: bold;
Â  Â  Â  margin-top: 10px;
Â  Â  Â  display: block;
Â  Â  Â  color: #333;
Â  Â  }

Â  Â  input, select, button {
Â  Â  Â  width: 100%;
Â  Â  Â  padding: 12px;
Â  Â  Â  margin-top: 5px;
Â  Â  Â  border-radius: var(--radius);
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  font-size: 1em;
Â  Â  }

Â  Â  button {
Â  Â  Â  background-color: var(--green);
Â  Â  Â  color: #333;
Â  Â  Â  font-weight: bold;
Â  Â  Â  border: none;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  button:hover {
Â  Â  Â  background-color: #a3d3a8;
Â  Â  }

Â  Â  .highlight {
Â  Â  Â  background-color: var(--orange);
Â  Â  Â  padding: 4px 8px;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  font-weight: bold;
Â  Â  }

Â  Â  .advice-box {
Â  Â  Â  background-color: #f3faf4;
Â  Â  Â  padding: 15px;
Â  Â  Â  border-radius: var(--radius);
Â  Â  Â  box-shadow: 0 2px 6px var(--shadow);
Â  Â  Â  margin-top: 20px;
Â  Â  }

Â  Â  .history-box {
Â  Â  Â  margin-top: 10px;
Â  Â  Â  padding: 10px;
Â  Â  Â  background-color: #e7f0e7;
Â  Â  Â  border-radius: var(--radius);
Â  Â  Â  display: none;
Â  Â  }

Â  Â  .chart-box {
Â  Â  Â  margin-top: 20px;
Â  Â  }
Â  </style>
</head>
<body>

Â  <div class="page active" id="homePage">
Â  Â  <h2>ğŸ€ AIå¥åº·ç‡Ÿé¤Šé¡§å•</h2>
Â  Â  <p>æ­¡è¿ä½¿ç”¨æœ¬Appï¼Œè«‹ä¾ç…§ä¸‹åˆ—æ­¥é©Ÿæ“ä½œï¼š<br>1. é»é¸ã€Œé–‹å§‹ä½¿ç”¨ã€<br>2. å¡«å¯«åŸºæœ¬å¥åº·è³‡æ–™<br>3. ç²å¾—å°ˆå±¬åˆ†æå ±å‘Šèˆ‡é£²é£Ÿå»ºè­°</p>
Â  Â  <button onclick="goToPage('loginPage')">é–‹å§‹ä½¿ç”¨</button>
Â  </div>

Â  <div class="page" id="loginPage">
Â  Â  <h2>æœƒå“¡ç™»å…¥èˆ‡å¥åº·è³‡æ–™</h2>
Â  Â  <label>å¸³è™Ÿï¼š</label>
Â  Â  <input type="text" id="username" required />

Â  Â  <label>æ€§åˆ¥ï¼š</label>
Â  Â  <select id="gender">
Â  Â  Â  <option value="male">ç”·æ€§</option>
Â  Â  Â  <option value="female">å¥³æ€§</option>
Â  Â  </select>

Â  Â  <label>å¹´é½¡ï¼š</label>
Â  Â  <input type="number" id="age" required />

Â  Â  <label>èº«é«˜ï¼ˆcmï¼‰ï¼š</label>
Â  Â  <input type="number" id="height" required />

Â  Â  <label>é«”é‡ï¼ˆkgï¼‰ï¼š</label>
Â  Â  <input type="number" id="weight" required />

Â  Â  <label>å¥åº·ç‹€æ³ï¼š</label>
Â  Â  <select id="condition">
Â  Â  Â  <option value="normal">æ­£å¸¸</option>
Â  Â  Â  <option value="diabetes">ç³–å°¿ç—…</option>
Â  Â  Â  <option value="hypertension">é«˜è¡€å£“</option>
Â  Â  Â  <option value="kidney">è…ç—…</option>
Â  Â  </select>

Â  Â  <label>é‹å‹•é »ç‡ï¼š</label>
Â  Â  <select id="activity">
Â  Â  Â  <option value="low">ä½ï¼ˆæ¯é€±1æ¬¡ä»¥ä¸‹ï¼‰</option>
Â  Â  Â  <option value="medium">ä¸­ï¼ˆæ¯é€±2~4æ¬¡ï¼‰</option>
Â  Â  Â  <option value="high">é«˜ï¼ˆæ¯é€±5æ¬¡ä»¥ä¸Šï¼‰</option>
Â  Â  </select>

Â  Â  <label>ç¡çœ æ™‚é–“ï¼ˆå°æ™‚ï¼‰ï¼š</label>
Â  Â  <input type="number" id="sleep" required />

Â  Â  <button onclick="submitData()">é€å‡ºè³‡æ–™</button>
Â  </div>

Â  <div class="page" id="resultPage">
Â  Â  <h2>ğŸ” åˆ†æçµæœ</h2>
Â  Â  <div class="advice-box" id="adviceContent"></div>
Â  Â  <div class="chart-box">
Â  Â  Â  <canvas id="nutritionChart"></canvas>
Â  Â  </div>
Â  Â  <button onclick="playAdvice()">æ’­æ”¾èªéŸ³</button>
Â  Â  <button onclick="stopAdvice()">åœæ­¢æ’­æ”¾</button>
Â  Â  <button onclick="toggleHistory()">é¡¯ç¤ºï¼éš±è—æ­·å²</button>
Â  Â  <div class="history-box" id="historyContent"></div>
Â  Â  <button onclick="goToPage('loginPage')">è¿”å›</button>
Â  </div>

Â  <script>
Â  Â  let historyData = {};
Â  Â  let currentVoice = null;

Â  Â  function goToPage(id) {
Â  Â  Â  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
Â  Â  Â  document.getElementById(id).classList.add('active');
Â  Â  }

Â  Â  function submitData() {
Â  Â  Â  const user = document.getElementById("username").value.trim().toLowerCase();
Â  Â  Â  const gender = document.getElementById("gender").value;
Â  Â  Â  const age = parseInt(document.getElementById("age").value);
Â  Â  Â  const height = parseFloat(document.getElementById("height").value);
Â  Â  Â  const weight = parseFloat(document.getElementById("weight").value);
Â  Â  Â  const condition = document.getElementById("condition").value;
Â  Â  Â  const activity = document.getElementById("activity").value;
Â  Â  Â  const sleep = parseFloat(document.getElementById("sleep").value);
Â  Â  Â  const bmi = (weight / Math.pow(height / 100, 2)).toFixed(1);

Â  Â  Â  let advice = `<strong>BMIå€¼ï¼š</strong> ${bmi}<br><ul>`;

Â  Â  Â  if (bmi >= 25) advice += `<li><span class="highlight">BMIéé‡</span>ï¼Œæ˜“å°è‡´é«˜è¡€å£“ã€ç³–å°¿ç—…ã€å¿ƒè¡€ç®¡ç–¾ç—…ã€‚</li>`;
Â  Â  Â  else if (bmi < 18.5) advice += `<li><span class="highlight">BMIéè¼•</span>ï¼Œå¯èƒ½é€ æˆå…ç–«åŠ›ä¸‹é™èˆ‡éª¨è³ªç–é¬†ã€‚</li>`;
Â  Â  Â  else advice += `<li><span class="highlight">BMIæ­£å¸¸</span>ï¼Œè«‹æŒçºŒä¿æŒå¥åº·ç”Ÿæ´»ã€‚</li>`;

Â  Â  Â  advice += `<li><strong>é é˜²å»ºè­°ï¼š</strong>å‡è¡¡é£²é£Ÿã€è¦å¾‹é‹å‹•ã€å……è¶³ç¡çœ èˆ‡å®šæœŸæª¢æŸ¥ã€‚</li>`;

Â  Â  Â  if (condition === "diabetes") {
Â  Â  Â  Â  advice += `
Â  Â  Â  Â  Â  <li>ã€ç³–å°¿ç—…å»ºè­°ã€‘ä½GIé£²é£Ÿã€æŒ‰æ™‚æœè—¥ã€ç›£æ¸¬è¡€ç³–ã€‚</li>
Â  Â  Â  Â  Â  <li>å»ºè­°é£Ÿè­œï¼š<br>æ—©é¤ï¼šåœ°ç“œï¼‹æ°´ç…®è›‹<br>åˆé¤ï¼šç³™ç±³é£¯ï¼‹è±†è…ï¼‹é’èœ<br>æ™šé¤ï¼šè”¬èœæ¹¯ï¼‹çƒ¤é›èƒ¸</li>
Â  Â  Â  Â  Â  <li>æ–™ç†æ­¥é©Ÿï¼š<br>1. å°‡åœ°ç“œè’¸ç†Ÿ15åˆ†é˜ã€‚<br>2. é›èƒ¸ä½¿ç”¨æ©„æ¬–æ²¹ç…ç†Ÿï¼Œæ­é…èƒ¡æ¤’èˆ‡é¦™è‰èª¿å‘³ã€‚</li>
Â  Â  Â  Â  `;
Â  Â  Â  } else if (condition === "hypertension") {
Â  Â  Â  Â  advice += `
Â  Â  Â  Â  Â  <li>ã€é«˜è¡€å£“å»ºè­°ã€‘ä½éˆ‰é£²é£Ÿã€é¿å…åŠ å·¥å“ã€ä¿æŒé«”é‡ã€‚</li>
Â  Â  Â  Â  Â  <li>å»ºè­°é£Ÿè­œï¼š<br>æ—©é¤ï¼šç‡•éº¥ç²¥ï¼‹é¦™è•‰<br>åˆé¤ï¼šè—œéº¥ï¼‹è’¸é­šï¼‹è èœ<br>æ™šé¤ï¼šåœ°ç“œï¼‹ç™½ç…®è›‹ï¼‹é’èŠ±èœ</li>
Â  Â  Â  Â  Â  <li>æ–™ç†æ­¥é©Ÿï¼š<br>1. è’¸é­š10åˆ†é˜ï¼ŒåŠ å…¥è–‘çµ²èˆ‡å°‘é‡é†¬æ²¹ã€‚<br>2. ç…®åœ°ç“œé£¯ä¸¦ä½ä»¥æ¸…è’¸è”¬èœã€‚</li>
Â  Â  Â  Â  `;
Â  Â  Â  } else if (condition === "kidney") {
Â  Â  Â  Â  advice += `
Â  Â  Â  Â  Â  <li>ã€è…ç—…å»ºè­°ã€‘é™åˆ¶é‰€èˆ‡ç£·æ”å–ã€æ¸›å°‘è›‹ç™½è³ªã€‚</li>
Â  Â  Â  Â  Â  <li>å»ºè­°é£Ÿè­œï¼š<br>æ—©é¤ï¼šç™½åå¸ï¼‹æ©„æ¬–è›‹<br>åˆé¤ï¼šç™½é£¯ï¼‹è’¸ç“œé¡<br>æ™šé¤ï¼šç±³ç²¥ï¼‹æ¸…ç‡™é’èœ</li>
Â  Â  Â  Â  Â  <li>æ–™ç†æ­¥é©Ÿï¼š<br>1. è’¸å—ç“œ8åˆ†é˜ï¼Œæ­é…ç™½é£¯ã€‚<br>2. ç±³ç²¥ä»¥ä½éˆ‰é«˜æ¹¯ç…®30åˆ†é˜ã€‚</li>
Â  Â  Â  Â  `;
Â  Â  Â  } else {
Â  Â  Â  Â  advice += `
Â  Â  Â  Â  Â  <li>æ•´é«”å¥åº·è‰¯å¥½ï¼Œç¶­æŒå‡è¡¡ç”Ÿæ´»å³å¯ã€‚</li>
Â  Â  Â  Â  Â  <li>å»ºè­°é£Ÿè­œï¼š<br>æ—©é¤ï¼šå„ªæ ¼ï¼‹å¥‡ç•°æœ<br>åˆé¤ï¼šåœ°ç“œé£¯ï¼‹è±†è…ç‚’æ™‚è”¬<br>æ™šé¤ï¼šç´«ç±³é£¯ï¼‹çƒ¤é®­é­šï¼‹é’èœ</li>
Â  Â  Â  Â  Â  <li>æ–™ç†æ­¥é©Ÿï¼š<br>1. é®­é­šçƒ¤10åˆ†é˜ï¼Œæ’’ä¸Šæª¸æª¬æ±ã€‚<br>2. ç´«ç±³æ³¡æ°´2å°æ™‚å¾Œè’¸ç…®ã€‚</li>
Â  Â  Â  Â  `;
Â  Â  Â  }

Â  Â  Â  if (activity === "low") advice += `<li>å¢åŠ é‹å‹•ï¼šæ¯æ—¥å¿«èµ°30åˆ†é˜ã€‚</li>`;
Â  Â  Â  else if (activity === "high") advice += `<li>é‹å‹•å……è¶³ï¼Œè«‹æŒçºŒè£œå……æ°´åˆ†èˆ‡è›‹ç™½è³ªã€‚</li>`;

Â  Â  Â  if (sleep < 6) advice += `<li>å»ºè­°å¢åŠ ç¡çœ è‡³æ¯æ™š7~8å°æ™‚ï¼Œæ”¹å–„ä»£è¬èˆ‡ä¿®å¾©ã€‚</li>`;
Â  Â  Â  else advice += `<li>ç¡çœ å……è¶³ï¼Œæœ‰åŠ©å¥åº·ç¶­æŒã€‚</li>`;

Â  Â  Â  advice += `</ul>`;

Â  Â  Â  document.getElementById("adviceContent").innerHTML = advice;
Â  Â  Â  renderNutritionChart();
Â  Â  Â  goToPage('resultPage');

Â  Â  Â  const timestamp = new Date().toLocaleString();
Â  Â  Â  if (!historyData[user]) historyData[user] = [];
Â  Â  Â  historyData[user].unshift(`<strong>${timestamp}</strong><br>${advice}<hr>`);
Â  Â  Â  localStorage.setItem('healthHistory', JSON.stringify(historyData));
Â  Â  }

Â  Â  function renderNutritionChart() {
Â  Â  Â  const ctx = document.getElementById('nutritionChart');
Â  Â  Â  new Chart(ctx, {
Â  Â  Â  Â  type: 'doughnut',
Â  Â  Â  Â  data: {
Â  Â  Â  Â  Â  labels: ['ç¢³æ°´åŒ–åˆç‰©', 'è›‹ç™½è³ª', 'è„‚è‚ª'],
Â  Â  Â  Â  Â  datasets: [{
Â  Â  Â  Â  Â  Â  data: [50, 30, 20],
Â  Â  Â  Â  Â  Â  backgroundColor: ['#a3d3a8', '#f8b26a', '#bfe3c1']
Â  Â  Â  Â  Â  }]
Â  Â  Â  Â  },
Â  Â  Â  Â  options: {
Â  Â  Â  Â  Â  responsive: true,
Â  Â  Â  Â  Â  plugins: {
Â  Â  Â  Â  Â  Â  legend: {
Â  Â  Â  Â  Â  Â  Â  position: 'bottom'
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  title: {
Â  Â  Â  Â  Â  Â  Â  display: true,
Â  Â  Â  Â  Â  Â  Â  text: 'ç‡Ÿé¤Šæ¯”ä¾‹å»ºè­°åœ–'
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  }

Â  Â  function playAdvice() {
Â  Â  Â  const text = document.getElementById("adviceContent").textContent;
Â  Â  Â  currentVoice = new SpeechSynthesisUtterance(text);
Â  Â  Â  currentVoice.lang = 'zh-TW';
Â  Â  Â  speechSynthesis.cancel();
Â  Â  Â  speechSynthesis.speak(currentVoice);
Â  Â  }

Â  Â  function stopAdvice() {
Â  Â  Â  speechSynthesis.cancel();
Â  Â  }

Â  Â  function toggleHistory() {
Â  Â  Â  const user = document.getElementById("username").value.trim().toLowerCase();
Â  Â  Â  const box = document.getElementById("historyContent");
Â  Â  Â  const stored = JSON.parse(localStorage.getItem('healthHistory'));
Â  Â  Â  historyData = stored || {};
Â  Â  Â  box.innerHTML = historyData[user]?.join('') || 'å°šç„¡æ­·å²ç´€éŒ„';
Â  Â  Â  box.style.display = box.style.display === 'none' ? 'block' : 'none';
Â  Â  }

Â  Â  window.onload = () => {
Â  Â  Â  const stored = localStorage.getItem('healthHistory');
Â  Â  Â  if (stored) historyData = JSON.parse(stored);
Â  Â  }
Â  </script>

</body>
</html>
